<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BookHaven - Catalogue</title>
    <link rel="stylesheet" href="base.css">
    <link rel="stylesheet" href="catalogue.css">
</head>
<body>
    <nav class="navbar">
        <div class="brand">
            <a href="home.html" class="brand-link">ðŸ“š BookHaven</a>
        </div>
        <div class="nav-links">
            <a href="home.html">Home</a>
            <a href="cart.html" class="cart-badge">
                Cart (<span id="cart-count">0</span>)
            </a>
        </div>
    </nav>

    <div class="container">
        <h1>Book Catalogue</h1>
        <div class="book-grid" id="bookGrid"></div>
    </div>

    <script>
        const books = [
            { id: 1, title: "The Great Gatsby", price: 499, cover: "ðŸ“•" },
            { id: 2, title: "1984 Orwell", price: 350, cover: "ðŸ“˜" },
            { id: 3, title: "To Kill a Mockingbird", price: 450, cover: "ðŸ“—" },
            { id: 4, title: "Brave New World", price: 399, cover: "ðŸ“™" },
            { id: 5, title: "The Hobbit", price: 599, cover: "ðŸ“”" },
            { id: 6, title: "Crime & Punishment", price: 420, cover: "ðŸ““" },
            { id: 7, title: "Atomic Habits", price: 550, cover: "ðŸ“’" },
            { id: 8, title: "The Alchemist", price: 299, cover: "ðŸ“•" },
            { id: 9, title: "Sapiens", price: 699, cover: "ðŸ“—" },
            { id: 10, title: "Rich Dad Poor Dad", price: 380, cover: "ðŸ“˜" }
        ];

        function display() {
            const grid = document.getElementById('bookGrid');
            // Check if grid exists before setting innerHTML
            if(grid) {
                grid.innerHTML = books.map(b => `
                    <div class="book-card">
                        <div class="book-cover">${b.cover}</div>
                        <h3>${b.title}</h3>
                        <p>Rs.${b.price}</p>
                        <button class="btn" onclick="add(${b.id})">Add to Cart</button>
                    </div>
                `).join('');
            }
        }

        function add(id) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            const selectedBook = books.find(b => b.id === id);
            
            // Store only the necessary data
            cart.push(selectedBook);
            localStorage.setItem('cart', JSON.stringify(cart));
            
            update();
            alert(`${selectedBook.title} added to cart!`);
        }

        function update() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const cartCountElement = document.getElementById('cart-count');
            if(cartCountElement) {
                cartCountElement.innerText = cart.length;
            }
        }

        // Initialize display and cart count on load
        display(); 
        update();
    </script>
</body>
</html>
